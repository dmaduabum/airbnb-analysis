# Platform Competition with Heterogeneous Hosts

## Overview
This repo contains background descriptive statistics and plots for the paper “Platform Competition with Heterogeneous Hosts.” The project focuses on Airbnb hosts in Boston, tracked by quarter. It’s distinctive because it uses individual-level supply data paired with aggregate demand data. Work is in progress.

## Project structure
```
airbnb-analysis/
├── data/
│   ├── raw/                 # Downloaded CSV files (immutable source)
│   └── processed/           # Cleaned data files
├── src/
│   ├── pipeline/
│   │   ├── get_raw_data.py          # Downloads raw Airbnb data
│   │   ├── clean_raw_data.py        # Cleans and validates data
│   │   └── create_aggregate_data.py # Builds joint/aggregate dataset
│   └── analysis/
│       ├── create_figures.py         # Exploratory visualizations
│       └── generate_summary_stats.py # Summary stats + statistical tests
├── results/
│   ├── figures/             # Generated plots
│   └── tables/              # Summary statistics & test results
├── tests/                   # Pytest-based tests (validation + analysis)
├── requirements.txt         # Python dependencies (pinned)
├── run_analysis.py          # One-command pipeline + test runner
└── README.md
```

## Installation & Setup
### 1. Clone the Repository

```bash
git clone https://github.com/dmaduabum/airbnb-analysis.git
cd airbnb-analysis
```
### 2. Create & Activate a Virtual Environment

```bash
python3 -m venv venv

# macOS/Linux
source venv/bin/activate

# Windows
venv\Scripts\activate
```
### 3. Install Dependencies

```bash
# Upgrade pip first
python3 -m pip install --upgrade pip

# Install all required packages from requirements.txt
pip install -r requirements.txt
```
## Usage
### One-Command Pipeline (includes tests)
```bash
python run_analysis.py
```
This will:

1. Download raw Airbnb data
2. Clean and validate the data
3. Create the aggregate / joint dataset
4. Generate figures
5. Produce summary statistics & statistical tests
6. Run the test suite automatically

## Outputs

- **results/tables/**
  - `summary_statistics.csv` – quarterly summary stats
  - `statistical_tests.csv` – ANOVA results (price across quarters)

- **results/figures/**
  - Exploratory plots generated by `create_figures.py`

## Development Notes

- The analysis code in `generate_summary_stats.py` is split into (where I/O means Input/Output):
  - `calculate_summary_stats(df)` – pure computation (no I/O)
  - `run_anova(df)` – pure computation (no I/O)
  - `perform_statistical_analysis(df, results_path)` – writes outputs
  - `main()` – pipeline wrapper used by `run_analysis.py`

- The cleaning function `clean_airbnb_data(df)` is defensive: it safely
  handles missing columns and coerces dtypes before filtering.

## Next Steps

- Implement the structural model (BLP (1995) + nested logit)
- Expand beyond Boston to additional U.S. markets
- Further automate data retrieval and add more statistical diagnostics

